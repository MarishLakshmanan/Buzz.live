{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sakth\\\\Documents\\\\BackUp\\\\Buzz.live\\\\frontend\\\\buzz.live\\\\src\\\\pages\\\\ChatRoom.js\",\n    _s = $RefreshSig$();\n\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { checkAuth } from \"../functions/Authorization\";\nimport { initSocketConnection, userChoice } from \"../functions/roomConnection\";\nimport YoutubeSearch from \"../components/YoutubeSearch\";\nimport { useState, useRef, useEffect } from \"react\";\nimport ChatBox from \"../components/ChatBox\";\nimport \"../styles/chatRoom.css\";\nimport axios from \"axios\";\nimport UserProfile from \"../components/UserProfile\";\nimport Toast from \"../components/Toast\"; // importing Icons\n\nimport chatIcon from \"../resources/chat.png\";\nimport applicationIcon from \"../resources/application.png\";\nimport youtubeIcon from \"../resources/youtube.png\";\nimport boardIcon from \"../resources/white-board.png\";\nimport YoutubePlayer from \"../components/YoutubePlayer\";\nimport videoChatIcon from \"../resources/video-chat.png\";\nimport videoIcon from \"../resources/video.png\";\nimport micIcon from \"../resources/microphone.png\";\nimport openMoreIcon from \"../resources/more.png\";\nimport closeIcon from \"../resources/cross.png\"; // importing functions\n\nimport { createMessage, switchTab, showYoutube, openMore, closeMore, toggleUserVideo, toggleUserMic } from \"../functions/chatRoomfunctions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ChatRoom() {\n  _s();\n\n  const [view, setView] = useState(\"videochat\");\n  const navigate = useNavigate();\n  const roomID = useParams().params;\n  const [videoMedia, setvideoMedia] = useState(videoIcon);\n  const [micMedia, setMicMedia] = useState(micIcon);\n  const [userArr, setUserArr] = useState([]);\n  const [url, setUrl] = useState(\"\");\n  const [client, setClient] = useState(false);\n  const [clientState, setClientState] = useState(true);\n  const clientRef = useRef();\n  const currentUserID = localStorage.getItem(\"id\");\n  const [toast, setToast] = useState({\n    state: false,\n    msg: \"\"\n  });\n  useEffect(() => {\n    checkAuth(navigate);\n    getRoomUsers().then(msg => {\n      initSocketConnection(roomID, playVideoClient, setClientState, clientRef, createMessage, setView, getRoomUsers);\n    });\n    ; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function getRoomUsers() {\n    return new Promise((resolve, reject) => {\n      axios.post(`http://localhost:5000/get-room-users/`, {\n        roomID: roomID\n      }).then(res => {\n        setUserArr(pre => {\n          console.log(res.data);\n          resolve(\"User added\");\n          return res.data;\n        });\n      });\n    });\n  }\n\n  function playVideo(vURL) {\n    setView(\"youtube\");\n    setUrl(vURL);\n    setClient(false);\n  }\n\n  function playVideoClient(vURL) {\n    setView(\"youtube\");\n    setUrl(vURL);\n    setClient(true);\n  }\n\n  function hostChoice(choice) {\n    userChoice(choice);\n    setView(choice);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatRoom-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content-container\",\n        children: [view === \"youtube\" ? /*#__PURE__*/_jsxDEV(YoutubePlayer, {\n          url: url,\n          client: client,\n          clientState: clientState,\n          clientRef: clientRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 41\n        }, this) : \"\", view === \"whiteboard\" ? /*#__PURE__*/_jsxDEV(\"iframe\", {\n          id: \"room-whiteboard\",\n          src: `https://witeboard.com/${roomID}`,\n          title: \"justexplore\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 43\n        }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"r-video-container\",\n          children: userArr.map(data => {\n            return /*#__PURE__*/_jsxDEV(UserProfile, {\n              id: data._id,\n              src: data.img,\n              username: data.username\n            }, data._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 36\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"media-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleUserVideo.bind(this, setvideoMedia, currentUserID),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: videoMedia,\n            alt: \"videoICon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 95\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleUserMic.bind(this, setMicMedia),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: micMedia,\n            alt: \"micIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 77\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: openMore,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: openMoreIcon,\n            alt: \"moreIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 49\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tools-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"chat-btn\",\n          className: \"active\",\n          onClick: switchTab.bind(this, \"chat\"),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: chatIcon,\n            alt: \"chatIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 101\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"more-btn\",\n          onClick: switchTab.bind(this, \"more\"),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: applicationIcon,\n            alt: \"appIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 82\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"close-more-btn\",\n          onClick: closeMore,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: closeIcon,\n            alt: \"moreIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 70\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-container activeTab\",\n        children: /*#__PURE__*/_jsxDEV(ChatBox, {\n          createMessage: createMessage,\n          toast: setToast\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"more-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: hostChoice.bind(this, \"videochat\"),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            width: \"50px\",\n            src: videoChatIcon,\n            alt: \"youtubeIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 74\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: showYoutube,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            width: \"50px\",\n            src: youtubeIcon,\n            alt: \"youtubeIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 51\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: hostChoice.bind(this, \"whiteboard\"),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            width: \"50px\",\n            src: boardIcon,\n            alt: \"youtubeIcon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 75\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"youtube-result-container\",\n        children: /*#__PURE__*/_jsxDEV(YoutubeSearch, {\n          cb: playVideo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Toast, {\n      option: toast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ChatRoom, \"r7vaYJG1t795UeziBFQaB+n40jM=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = ChatRoom;\nexport default ChatRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"sources":["C:/Users/sakth/Documents/BackUp/Buzz.live/frontend/buzz.live/src/pages/ChatRoom.js"],"names":["useNavigate","useParams","checkAuth","initSocketConnection","userChoice","YoutubeSearch","useState","useRef","useEffect","ChatBox","axios","UserProfile","Toast","chatIcon","applicationIcon","youtubeIcon","boardIcon","YoutubePlayer","videoChatIcon","videoIcon","micIcon","openMoreIcon","closeIcon","createMessage","switchTab","showYoutube","openMore","closeMore","toggleUserVideo","toggleUserMic","ChatRoom","view","setView","navigate","roomID","params","videoMedia","setvideoMedia","micMedia","setMicMedia","userArr","setUserArr","url","setUrl","client","setClient","clientState","setClientState","clientRef","currentUserID","localStorage","getItem","toast","setToast","state","msg","getRoomUsers","then","playVideoClient","Promise","resolve","reject","post","res","pre","console","log","data","playVideo","vURL","hostChoice","choice","map","_id","img","username","bind"],"mappings":"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","sourcesContent":["\r\nimport { useNavigate , useParams } from \"react-router-dom\";\r\nimport { checkAuth } from \"../functions/Authorization\";\r\nimport {initSocketConnection,userChoice} from \"../functions/roomConnection\"\r\nimport YoutubeSearch from \"../components/YoutubeSearch\";\r\nimport {useState,useRef,useEffect} from \"react\"\r\nimport ChatBox from \"../components/ChatBox\"\r\nimport \"../styles/chatRoom.css\"\r\nimport axios from \"axios\"\r\nimport UserProfile from \"../components/UserProfile\";\r\nimport Toast from \"../components/Toast\";\r\n\r\n\r\n// importing Icons\r\n\r\nimport chatIcon from \"../resources/chat.png\"\r\nimport applicationIcon from \"../resources/application.png\"\r\nimport youtubeIcon from \"../resources/youtube.png\"\r\nimport boardIcon from \"../resources/white-board.png\"\r\nimport YoutubePlayer from \"../components/YoutubePlayer\";\r\nimport videoChatIcon from \"../resources/video-chat.png\"\r\nimport videoIcon from \"../resources/video.png\"\r\nimport micIcon from \"../resources/microphone.png\"\r\nimport openMoreIcon from \"../resources/more.png\"\r\nimport closeIcon from \"../resources/cross.png\"\r\n\r\n// importing functions\r\n\r\nimport {createMessage,switchTab,showYoutube,openMore,closeMore,toggleUserVideo,toggleUserMic} from \"../functions/chatRoomfunctions\"\r\n\r\n\r\nfunction ChatRoom(){\r\n\r\n    \r\n    const [view,setView] = useState(\"videochat\");\r\n    const navigate = useNavigate();\r\n    const roomID = useParams().params;\r\n    const [videoMedia,setvideoMedia] = useState(videoIcon);\r\n    const [micMedia,setMicMedia] = useState(micIcon);\r\n    const [userArr,setUserArr] = useState([]);\r\n    const[url,setUrl] = useState(\"\");\r\n    const[client,setClient] = useState(false);\r\n    const [clientState,setClientState] = useState(true);\r\n    const clientRef  = useRef();\r\n    const currentUserID = localStorage.getItem(\"id\");\r\n    const [toast,setToast]=useState({state:false,msg:\"\"});\r\n\r\n    \r\n    useEffect(()=>{\r\n        checkAuth(navigate);\r\n        getRoomUsers().then((msg)=>{\r\n            initSocketConnection(roomID,playVideoClient,setClientState,clientRef,createMessage,setView,getRoomUsers)\r\n        });\r\n        ;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[]);\r\n    \r\n\r\n    function getRoomUsers(){\r\n\r\n        return new Promise((resolve,reject)=>{\r\n            axios.post(`http://localhost:5000/get-room-users/`,{roomID:roomID}).then((res)=>{\r\n            setUserArr((pre)=>{\r\n                console.log(res.data);\r\n                resolve(\"User added\");\r\n                return res.data;\r\n            })\r\n        })\r\n        })   \r\n    }\r\n   function playVideo(vURL){\r\n       setView(\"youtube\")\r\n       setUrl(vURL);\r\n       setClient(false);\r\n   }\r\n\r\n   function playVideoClient(vURL){\r\n        setView(\"youtube\")\r\n        setUrl(vURL);\r\n        setClient(true);\r\n   }\r\n\r\n   function hostChoice(choice){\r\n       userChoice(choice)\r\n       setView(choice);\r\n   }\r\n\r\n\r\n    return(\r\n        <div className=\"chatRoom-container\">\r\n\r\n            <div className=\"content-container\">\r\n                <div className=\"main-content-container\">\r\n                    {(view===\"youtube\")?<YoutubePlayer url={url} client={client} clientState={clientState} clientRef={clientRef}/>:\"\" }\r\n                    {(view===\"whiteboard\"?<iframe id=\"room-whiteboard\" src={`https://witeboard.com/${roomID}`} title=\"justexplore\"></iframe>:\"\")}\r\n                    <div id = \"r-video-container\" >\r\n                        {userArr.map((data)=>{\r\n                            return <UserProfile key={data._id} id={data._id} src={data.img} username={data.username} />\r\n                        })}\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div className=\"media-controls\">\r\n                    <button onClick={toggleUserVideo.bind(this,setvideoMedia,currentUserID)} ><img src={videoMedia} alt=\"videoICon\"/></button>\r\n                    <button onClick={toggleUserMic.bind(this,setMicMedia)} ><img src={micMedia} alt=\"micIcon\"/></button>\r\n                    <button onClick={openMore} ><img src={openMoreIcon} alt=\"moreIcon\"/></button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"tools-container\">\r\n                <div className=\"tab-container\">\r\n                    <button id=\"chat-btn\" className=\"active\" onClick={switchTab.bind(this,\"chat\")} ><img src={chatIcon} alt=\"chatIcon\"/></button>\r\n                    <button id=\"more-btn\" onClick={switchTab.bind(this,\"more\")} ><img src={applicationIcon} alt=\"appIcon\" /></button>\r\n                    <button id=\"close-more-btn\" onClick={closeMore} ><img src={closeIcon} alt=\"moreIcon\"/></button>\r\n                </div>\r\n                <div className=\"chat-container activeTab\">\r\n                    <ChatBox createMessage={createMessage} toast={setToast}/>\r\n                </div>\r\n                <div className=\"more-container\">\r\n                    <button onClick={hostChoice.bind(this,\"videochat\")} ><img width=\"50px\"  src={videoChatIcon} alt=\"youtubeIcon\"/></button>\r\n                    <button onClick={showYoutube}><img  width=\"50px\"  src={youtubeIcon} alt=\"youtubeIcon\"/></button>\r\n                    <button onClick={hostChoice.bind(this,\"whiteboard\")} ><img width=\"50px\"  src={boardIcon} alt=\"youtubeIcon\"/></button>\r\n                </div>\r\n                <div className=\"youtube-result-container\">\r\n                    <YoutubeSearch cb={playVideo}/>\r\n                </div>\r\n            </div>\r\n\r\n            <Toast option={toast}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatRoom;"]},"metadata":{},"sourceType":"module"}